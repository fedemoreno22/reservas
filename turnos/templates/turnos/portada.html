{% extends 'turnos/base.html' %}
{% load static %}

{% block title %}Portada{% endblock %}

{% block content %}
<h1 class="mb-4 text-center">Elegí tu cancha favorita</h1>

<div class="row">
  {% for item in info_canchas %}
    {% with cancha=item.cancha proximo=item.proximo %}
      <div class="col-12 col-md-4 mb-4">
        <div class="card h-100">
          {% if cancha.imagen %}
            <img src="{{ cancha.imagen.url }}" class="card-img-top img-fluid" alt="Imagen de {{ cancha.nombre }}">
          {% else %}
            <img src="{% static 'img/cancha.jpg' %}" class="card-img-top img-fluid" alt="Imagen genérica">
          {% endif %}

          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ cancha.nombre }}</h5>
            <p class="card-text">{{ cancha.descripcion|default:"Cancha disponible para alquilar." }}</p>
            {% if proximo %}
              <p class="text-success fw-bold">
                Próximo disponible:<br>
                {{ proximo.fecha|date:"d/m/Y" }} a las {{ proximo.hora_inicio|time:"H:i" }}
              </p>
            {% else %}
              <p class="text-danger">Sin horarios disponibles</p>
            {% endif %}

            {% if user.is_authenticated %}
              <a href="{% url 'reservar_turno' %}?cancha={{ cancha.id }}{% if proximo %}&fecha={{ proximo.fecha|date:"Y-m-d" }}{% endif %}"
                 class="btn btn-success w-100">
                Reservar esta cancha
              </a>
            {% else %}
              <a href="{% url 'login' %}" class="btn btn-outline-secondary">Iniciar sesión para reservar</a>
            {% endif %}
          </div>
        </div>
      </div>
    {% endwith %}
  {% endfor %}
</div>
{% endblock %}